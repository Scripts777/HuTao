-- Services
local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- === НАСТРОЙКИ ===
local LIMIT = 50_000_000 -- 50M/s
local FAIL_TEXT = "НЕТУ ТУТ НИХУЯ"

-- === ПАРСЕР $/s (ИСПРАВЛЕННЫЙ ПОД ТВОЮ ИГРУ) ===
local function parseIncome(text)
    if not text or type(text) ~= "string" then
        return 0
    end

    text = text:gsub("%s+", "") -- убираем пробелы

    -- Форматы: $15/s | $53.6M/s | $5.5M/s
    local num, suffix = text:match("%$(%d+%.?%d*)([Mm]?)/s")
    if not num then
        return 0
    end

    local value = tonumber(num)
    if not value then
        return 0
    end

    if suffix == "M" or suffix == "m" then
        value *= 1_000_000
    end

    return value
end

-- === СКАН workspace.Debris ===
local totalIncome = 0
local foundCount = 0

local debris = workspace:FindFirstChild("Debris")
if debris then
    for _, obj in ipairs(debris:GetDescendants()) do
        if obj:IsA("TextLabel") and obj.Name == "Generation" then
            local income = parseIncome(obj.Text)
            if income > 0 then
                totalIncome += income
                foundCount += 1
            end
        end
    end
end

print("Найдено источников:", foundCount)
print("Общий доход:", totalIncome, "/s")

-- === ЕСЛИ ДОХОД <= 50M/s → ЧЁРНЫЙ ЭКРАН ===
if totalIncome <= LIMIT then
    local gui = Instance.new("ScreenGui")
    gui.IgnoreGuiInset = true
    gui.ResetOnSpawn = false
    gui.Name = "BLACKOUT_GUI"

    local frame = Instance.new("Frame")
    frame.Size = UDim2.fromScale(1, 1)
    frame.BackgroundColor3 = Color3.new(0, 0, 0)
    frame.Parent = gui

    local text = Instance.new("TextLabel")
    text.Size = UDim2.fromScale(1, 1)
    text.BackgroundTransparency = 1
    text.Text = FAIL_TEXT
    text.TextColor3 = Color3.new(1, 1, 1)
    text.TextScaled = true
    text.Font = Enum.Font.GothamBlack
    text.Parent = frame

    gui.Parent = player:WaitForChild("PlayerGui")
    return
end

-- === ЕСЛИ ДОХОД > 50M/s → KICK ===
local totalM = totalIncome / 1_000_000
player:Kick(string.format(
    "НАЙДЕН ВЫСОКИЙ ДОХОД!\n\nОбщий доход: %.2fM/s",
    totalM
))
